(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{44:function(t,e,r){"use strict";r.r(e);var i=r(3),a=r(7),s=r.n(a),o=r(8),l={components:{"vuejs-datepicker":r(21).a},data:()=>({filterDateFrom:new Date(Date.now()-12096e5),filterDateTo:Date.now()}),methods:{filterData(){this.$emit("update-dates",{filterDateFrom:this.filterDateFrom,filterDateTo:this.filterDateTo})}}},n=r(1),u=Object(n.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mt-3 mb-3 text-left"},[r("b-form-group",{staticClass:"d-inline-block",attrs:{label:"From Date:"}},[r("vuejs-datepicker",{attrs:{"input-class":"form-control"},model:{value:t.filterDateFrom,callback:function(e){t.filterDateFrom=e},expression:"filterDateFrom"}})],1),t._v(" "),r("b-form-group",{staticClass:"d-inline-block",attrs:{label:"To Date:"}},[r("vuejs-datepicker",{attrs:{"input-class":"form-control"},model:{value:t.filterDateTo,callback:function(e){t.filterDateTo=e},expression:"filterDateTo"}})],1),t._v(" "),r("b-form-group",{staticClass:"d-inline-block"},[r("button",{staticClass:"btn btn-primary",on:{click:t.filterData}},[t._v("Filter")])])],1)}),[],!1,null,null,null).exports,d=r(22),c={date:()=>({dateFormat:"x"}),props:{dateFrom:[Number,Date],dateTo:[Number,Date]},computed:{filterDateFrom(){return new Date(Number(this.dateFrom))},filterDateTo(){return new Date(Number(this.dateTo))},filterDateFromNumber(){return(this.filterDateFrom.getTime()/1e3).toFixed(0)},filterDateToNumber(){return(this.filterDateTo.getTime()/1e3).toFixed(0)},dateFilterQueryString(){return"&from="+this.filterDateFromNumber+"&to="+this.filterDateToNumber}}},p={components:{apexchart:r.n(d).a},mixins:[c],data:()=>({routes:[],routeType:1,selectedRoute:null,routeVisitsPerPeriodData:null,routeVisitsPerWeekDaysData:null}),computed:{filteredRoutes(){let t=[];return 1===this.routeType?t=this.routes.filter(t=>!t.startsWith("/api/")&&!t.startsWith("/admin")):2===this.routeType?t=this.routes.filter(t=>t.startsWith("/admin")):3===this.routeType&&(t=this.routes.filter(t=>t.startsWith("/api/"))),t}},methods:{loadUniqueRoutes(){let t=this;this.$http.get("/api/analytics/get-unique-routes").then(e=>{t.routes=e.data,t.selectedRoute=t.filteredRoutes[0],this.globalFilter()}).catch(t=>{})},loadRouteVisitsPerPerios(){let t=this;this.$http.get("/api/analytics/route-visits-per-period?route="+this.selectedRoute+this.dateFilterQueryString).then(e=>{t.updateRouteVisitsPerPeriodChart(e.data)}).catch(t=>{})},loadRouteVisitsPerWeekDay(){let t=this;this.$http.get("/api/analytics/route-visits-per-week-day?route="+this.selectedRoute+this.dateFilterQueryString).then(e=>{t.updateRouteVisitsPerWeekDayChart(e.data)}).catch(t=>{})},updateRouteVisitsPerPeriodChart(t){this.routeVisitsPerPeriodData={series:[{name:"All Visits",data:t.visits},{name:"Unique Visits",data:t.uniqueVisits}],chartOptions:{chart:{shadow:{enabled:!0,color:"#000",top:18,left:7,blur:10,opacity:1},toolbar:{show:!1}},colors:["#7eb62f","#545454"],dataLabels:{enabled:!0},stroke:{curve:"smooth"},title:{text:"Visits Per "+t.periodType+(null!==t.hourTypeDate?" ("+t.hourTypeDate+")":""),align:"center"},grid:{borderColor:"#e7e7e7",row:{colors:["#f3f3f3","transparent"],opacity:.5}},markers:{size:6},xaxis:{categories:t.dates,title:{text:t.periodType}},yaxis:{title:{text:"Visits"},min:t.minVisits,max:t.maxVisits},legend:{position:"top",horizontalAlign:"right",floating:!0,offsetY:-25,offsetX:-5}}}},updateRouteVisitsPerWeekDayChart(t){this.routeVisitsPerWeekDaysData={series:[{name:"All Visits",data:t.visits},{name:"Unique Visits",data:t.uniqueVisits}],chartOptions:{chart:{toolbar:{show:!1}},labels:t.days,plotOptions:{radar:{size:140,polygons:{strokeColor:"#7eb62f",fill:{colors:["#f8f8f8","#fff"]}}}},title:{text:"Visits Per Week Days",align:"center"},colors:["#7eb62f","#545454"],markers:{size:3,colors:["#ddd"],strokeColor:"#545454",strokeWidth:2},tooltip:{y:{formatter:function(t){return t}}},yaxis:{tickAmount:7,labels:{formatter:function(t,e){return e%2==0?t:""}}}}}},globalFilter(){this.loadRouteVisitsPerPerios(),this.loadRouteVisitsPerWeekDay()}},mounted(){this.loadUniqueRoutes()},watch:{dateFilterQueryString(){this.globalFilter()}}},f={components:{"data-filter":u,"routes-visits-widget":Object(n.a)(p,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card p-3"},[t._m(0),t._v(" "),r("div",{staticClass:"p-3"},[r("b-form-group",{staticClass:"d-inline-block",attrs:{label:"Type:"}},[r("select",{directives:[{name:"model",rawName:"v-model.number",value:t.routeType,expression:"routeType",modifiers:{number:!0}}],staticClass:"form-control",on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var r="_value"in e?e._value:e.value;return t._n(r)}));t.routeType=e.target.multiple?r:r[0]},t.loadUniqueRoutes]}},[r("option",{attrs:{value:"1"}},[t._v("Client")]),t._v(" "),r("option",{attrs:{value:"2"}},[t._v("Admin")]),t._v(" "),r("option",{attrs:{value:"3"}},[t._v("API")])])]),t._v(" "),r("b-form-group",{staticClass:"d-inline-block",attrs:{label:"Route:"}},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedRoute,expression:"selectedRoute"}],staticClass:"form-control",on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedRoute=e.target.multiple?r:r[0]},t.globalFilter]}},t._l(t.filteredRoutes,(function(e,i){return r("option",{key:i,domProps:{value:e}},[t._v("\n                    "+t._s(e)+"\n                ")])})),0)]),t._v(" "),r("hr"),t._v(" "),r("b-row",{attrs:{if:"selectedRoute != null"}},[r("b-col",{attrs:{md:"8"}},[null!=t.routeVisitsPerPeriodData?r("apexchart",{attrs:{type:"line",height:"350",options:t.routeVisitsPerPeriodData.chartOptions,series:t.routeVisitsPerPeriodData.series}}):t._e()],1),t._v(" "),r("b-col",{attrs:{md:"4"}},[null!=t.routeVisitsPerWeekDaysData?r("apexchart",{attrs:{type:"radar",height:"350",options:t.routeVisitsPerWeekDaysData.chartOptions,series:t.routeVisitsPerWeekDaysData.series}}):t._e()],1)],1)],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header p-0 text-center"},[e("h3",[this._v("Routes Visits")])])}],!1,null,null,null).exports},data:()=>({filterDateFrom:new Date(Date.now()-12096e5),filterDateTo:Date.now()}),methods:{updateDates(t){this.filterDateFrom=t.filterDateFrom,this.filterDateTo=t.filterDateTo}}},h=Object(n.a)(f,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("data-filter",{on:{"update-dates":this.updateDates}}),this._v(" "),e("routes-visits-widget",{attrs:{"date-from":this.filterDateFrom,"date-to":this.filterDateTo}})],1)}),[],!1,null,null,null).exports;i.default.use(o.a),i.default.prototype.$http=s.a,new i.default({el:"#dashboard-app",render:t=>t(h)})}},[[44,0,1]]]);